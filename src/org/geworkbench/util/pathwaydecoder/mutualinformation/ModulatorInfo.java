package org.geworkbench.util.pathwaydecoder.mutualinformation;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.geworkbench.bison.datastructure.bioobjects.markers.DSGeneMarker;

/**
 * @author oshteynb
 * @version $Id: ModulatorInfo.java,v 1.2 2009-05-27 15:31:22 oshteynb Exp $
 *
 */
public class ModulatorInfo implements Serializable {
    /**
	 * 	serialVersionUID generated by Eclipse
	 */
	private static final long serialVersionUID = 5637267668779649984L;

	public ModulatorInfo(DSGeneMarker modulator) {
		this.modulator = modulator;
	}

    public void insertRow(MindyResultRow row) {
    	data.add(row);

    	targetResultMap.put(row.getTarget(), row);

        // calculate modulator statistics
        if (row.getScore() < 0) {
            modStat.munder++;
            modStat.count++;
        } else if(row.getScore() > 0){
            modStat.mover++;
            modStat.count++;
        }

    }

	public ModulatorStatistics getModStat() {
		return modStat;
	}

    public List<MindyResultRow> getData() {
		return data;
	}

    public int getDataSize(){
    	return this.data.size();
    }

    public float getScore(DSGeneMarker target) {
    	MindyResultRow row = getRow(target);

    	float result;
        if (row == null) {
        	result = 0;
        } else {
        	result = row.getScore();
        }

        return result;
    }

	/**
	 * @param target
	 * @return MindyResultRow, null if not there
	 */
	public MindyResultRow getRow(DSGeneMarker target) {
		MindyResultRow row = targetResultMap.get(target);
		return row;
	}

	private DSGeneMarker modulator;
    private ModulatorStatistics modStat= new ModulatorStatistics(0, 0, 0);;

    private List<MindyResultRow> data = new ArrayList<MindyResultRow>();
	private HashMap<DSGeneMarker, MindyResultRow> targetResultMap = new HashMap<DSGeneMarker, MindyResultRow>();

}
